//   Copyright 2013-2014 Fran√ßois de Campredon
//
//   Licensed under the Apache License, Version 2.0 (the "License");
//   you may not use this file except in compliance with the License.
//   You may obtain a copy of the License at
//
//       http://www.apache.org/licenses/LICENSE-2.0
//
//   Unless required by applicable law or agreed to in writing, software
//   distributed under the License is distributed on an "AS IS" BASIS,
//   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//   See the License for the specific language governing permissions and
//   limitations under the License.
'use strict';
var path = require('path');
function mapValues(map) {
    return Object.keys(map).reduce(function (result, key) {
        result.push(map[key]);
        return result;
    }, []);
}
exports.mapValues = mapValues;
/**
 * assign all properties of a list of object to an object
 * @param target the object that will receive properties
 * @param items items which properties will be assigned to a target
 */
function assign(target) {
    var items = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        items[_i - 1] = arguments[_i];
    }
    return items.reduce(function (target, source) {
        return Object.keys(source).reduce(function (target, key) {
            target[key] = source[key];
            return target;
        }, target);
    }, target);
}
exports.assign = assign;
/**
 * clone an object (shallow)
 * @param target the object to clone
 */
function clone(target) {
    return assign(Array.isArray(target) ? [] : {}, target);
}
exports.clone = clone;
/**
 * Create a quick lookup map from list
 */
function createMap(arr) {
    return arr.reduce(function (result, key) {
        result[key] = true;
        return result;
    }, {});
}
exports.createMap = createMap;
/**
 * browserify path.resolve is buggy on windows
 */
function pathResolve(from, to) {
    var result = path.resolve(from, to);
    var index = result.indexOf(from[0]);
    return result.slice(index);
}
exports.pathResolve = pathResolve;
var nameExtractorRegex = /return (.*);/;
/** Get the name using a lambda so that you don't have magic strings */
function getName(nameLambda) {
    var m = nameExtractorRegex.exec(nameLambda + "");
    if (m == null)
        throw new Error("The function does not contain a statement matching 'return variableName;'");
    var access = m[1].split('.');
    return access[access.length - 1];
}
exports.getName = getName;
/** Sloppy but effective code to find distinct */
function distinct(arr) {
    var map = createMap(arr);
    return Object.keys(map);
}
exports.distinct = distinct;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3NoYW5ub25iZXJ0dWNjaS8uYXRvbS9wYWNrYWdlcy9hdG9tLXR5cGVzY3JpcHQvbGliL21haW4vbGFuZy91dGlscy50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3NoYW5ub25iZXJ0dWNjaS8uYXRvbS9wYWNrYWdlcy9hdG9tLXR5cGVzY3JpcHQvbGliL21haW4vbGFuZy91dGlscy50cyJdLCJuYW1lcyI6WyJtYXBWYWx1ZXMiLCJhc3NpZ24iLCJjbG9uZSIsImNyZWF0ZU1hcCIsInBhdGhSZXNvbHZlIiwiZ2V0TmFtZSIsImRpc3RpbmN0Il0sIm1hcHBpbmdzIjoiQUFBQSw4Q0FBOEM7QUFDOUMsRUFBRTtBQUNGLG9FQUFvRTtBQUNwRSxxRUFBcUU7QUFDckUsNENBQTRDO0FBQzVDLEVBQUU7QUFDRixtREFBbUQ7QUFDbkQsRUFBRTtBQUNGLHdFQUF3RTtBQUN4RSxzRUFBc0U7QUFDdEUsNkVBQTZFO0FBQzdFLHdFQUF3RTtBQUN4RSxtQ0FBbUM7QUFFbkMsWUFBWSxDQUFDO0FBRWIsSUFBTyxJQUFJLFdBQVcsTUFBTSxDQUFDLENBQUM7QUFFOUIsU0FBZ0IsU0FBUyxDQUFJLEdBQTJCO0lBQ3BEQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxNQUFNQSxDQUFDQSxVQUFDQSxNQUFXQSxFQUFFQSxHQUFXQTtRQUNwREEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDdEJBLE1BQU1BLENBQUNBLE1BQU1BLENBQUNBO0lBQ2xCQSxDQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxDQUFDQTtBQUNYQSxDQUFDQTtBQUxlLGlCQUFTLEdBQVQsU0FLZixDQUFBO0FBT0QsQUFMQTs7OztHQUlHO1NBQ2EsTUFBTSxDQUFDLE1BQVc7SUFBRUMsZUFBZUE7U0FBZkEsV0FBZUEsQ0FBZkEsc0JBQWVBLENBQWZBLElBQWVBO1FBQWZBLDhCQUFlQTs7SUFD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XG4vL1xuLy8gICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8gICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyAgIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vICAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLyAgIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyAgIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFwVmFsdWVzPFQ+KG1hcDogeyBbaW5kZXg6IHN0cmluZ106IFQgfSk6IFRbXSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG1hcCkucmVkdWNlKChyZXN1bHQ6IFRbXSwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmVzdWx0LnB1c2gobWFwW2tleV0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sIFtdKTtcbn1cblxuLyoqXG4gKiBhc3NpZ24gYWxsIHByb3BlcnRpZXMgb2YgYSBsaXN0IG9mIG9iamVjdCB0byBhbiBvYmplY3RcbiAqIEBwYXJhbSB0YXJnZXQgdGhlIG9iamVjdCB0aGF0IHdpbGwgcmVjZWl2ZSBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0gaXRlbXMgaXRlbXMgd2hpY2ggcHJvcGVydGllcyB3aWxsIGJlIGFzc2lnbmVkIHRvIGEgdGFyZ2V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0OiBhbnksIC4uLml0ZW1zOiBhbnlbXSk6IGFueSB7XG4gICAgcmV0dXJuIGl0ZW1zLnJlZHVjZShmdW5jdGlvbih0YXJnZXQ6IGFueSwgc291cmNlOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHNvdXJjZSkucmVkdWNlKCh0YXJnZXQ6IGFueSwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9LCB0YXJnZXQpO1xuICAgIH0sIHRhcmdldCk7XG59XG5cbi8qKlxuICogY2xvbmUgYW4gb2JqZWN0IChzaGFsbG93KVxuICogQHBhcmFtIHRhcmdldCB0aGUgb2JqZWN0IHRvIGNsb25lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZTxUPih0YXJnZXQ6IFQpOiBUIHtcbiAgICByZXR1cm4gYXNzaWduKEFycmF5LmlzQXJyYXkodGFyZ2V0KSA/IFtdIDoge30sIHRhcmdldCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcXVpY2sgbG9va3VwIG1hcCBmcm9tIGxpc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1hcChhcnI6IChzdHJpbmd8bnVtYmVyKVtdKTogeyBbc3RyaW5nOiBzdHJpbmddOiBib29sZWFuO1tudW1iZXI6IG51bWJlcl06IGJvb2xlYW4gfSB7XG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoKHJlc3VsdDogeyBbc3RyaW5nOiBzdHJpbmddOiBib29sZWFuIH0sIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCA8eyBbc3RyaW5nOiBzdHJpbmddOiBib29sZWFuIH0+e30pO1xufVxuXG5cbi8qKlxuICogYnJvd3NlcmlmeSBwYXRoLnJlc29sdmUgaXMgYnVnZ3kgb24gd2luZG93c1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGF0aFJlc29sdmUoZnJvbTogc3RyaW5nLCB0bzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICB2YXIgcmVzdWx0ID0gcGF0aC5yZXNvbHZlKGZyb20sIHRvKTtcbiAgICB2YXIgaW5kZXggPSByZXN1bHQuaW5kZXhPZihmcm9tWzBdKTtcbiAgICByZXR1cm4gcmVzdWx0LnNsaWNlKGluZGV4KTtcbn1cblxuXG4vKipcbiAqIEMjIGxpa2UgZXZlbnRzIGFuZCBkZWxlZ2F0ZXMgZm9yIHR5cGVkIGV2ZW50c1xuICogZGlzcGF0Y2hpbmdcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJU2lnbmFsPFQ+IHtcbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmVzIGEgbGlzdGVuZXIgZm9yIHRoZSBzaWduYWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW1zIGxpc3RlbmVyIHRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW4gZXZlbnRzIGFyZSBkaXNwYXRjaGVkXG4gICAgICogQHBhcmFtcyBwcmlvcml0eSBhbiBvcHRpb25hbCBwcmlvcml0eSBmb3IgdGhpcyBzaWduYWxcbiAgICAgKi9cbiAgICBhZGQobGlzdGVuZXI6IChwYXJhbWV0ZXI6IFQpID0+IGFueSwgcHJpb3JpdHk/OiBudW1iZXIpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogdW5zdWJzY3JpYmUgYSBsaXN0ZW5lciBmb3IgdGhlIHNpZ25hbFxuICAgICAqXG4gICAgICogQHBhcmFtcyBsaXN0ZW5lciB0aGUgcHJldmlvdXNseSBzdWJzY3JpYmVkIGxpc3RlbmVyXG4gICAgICovXG4gICAgcmVtb3ZlKGxpc3RlbmVyOiAocGFyYW1ldGVyOiBUKSA9PiBhbnkpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogZGlzcGF0Y2ggYW4gZXZlbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgcGFyYW1ldGVyIHRoZSBwYXJhbWV0ZXIgYXR0YWNoZWQgdG8gdGhlIGV2ZW50IGRpc3BhdGNoaW5nXG4gICAgICovXG4gICAgZGlzcGF0Y2gocGFyYW1ldGVyPzogVCk6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGxpc3RlbmVyIGZyb20gdGhlIHNpZ25hbFxuICAgICAqL1xuICAgIGNsZWFyKCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIGxpc3RlbmVyIGhhcyBiZWVuIHN1YnNyaWJlZCB0byB0aGlzIHNpZ25hbFxuICAgICAqL1xuICAgIGhhc0xpc3RlbmVycygpOiBib29sZWFuO1xufVxuXG52YXIgbmFtZUV4dHJhY3RvclJlZ2V4ID0gL3JldHVybiAoLiopOy87XG4vKiogR2V0IHRoZSBuYW1lIHVzaW5nIGEgbGFtYmRhIHNvIHRoYXQgeW91IGRvbid0IGhhdmUgbWFnaWMgc3RyaW5ncyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5hbWUobmFtZUxhbWJkYTogKCkgPT4gYW55KSB7XG4gICAgdmFyIG0gPSBuYW1lRXh0cmFjdG9yUmVnZXguZXhlYyhuYW1lTGFtYmRhICsgXCJcIik7XG4gICAgaWYgKG0gPT0gbnVsbClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGZ1bmN0aW9uIGRvZXMgbm90IGNvbnRhaW4gYSBzdGF0ZW1lbnQgbWF0Y2hpbmcgJ3JldHVybiB2YXJpYWJsZU5hbWU7J1wiKTtcbiAgICB2YXIgYWNjZXNzID0gbVsxXS5zcGxpdCgnLicpO1xuICAgIHJldHVybiBhY2Nlc3NbYWNjZXNzLmxlbmd0aCAtIDFdO1xufVxuXG4vKiogU2xvcHB5IGJ1dCBlZmZlY3RpdmUgY29kZSB0byBmaW5kIGRpc3RpbmN0ICovXG5leHBvcnQgZnVuY3Rpb24gZGlzdGluY3QoYXJyOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICB2YXIgbWFwID0gY3JlYXRlTWFwKGFycik7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59XG4iXX0=