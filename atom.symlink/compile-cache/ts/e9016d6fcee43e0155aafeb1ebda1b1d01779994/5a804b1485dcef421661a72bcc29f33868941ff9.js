exports.errorsInOpenFiles = { members: [] };
exports.buildOutput = { members: [] };
exports.referencesOutput = { members: [] };
/** This *must* always be set */
exports.activeList = exports.errorsInOpenFiles;
function gotoLine(filePath, line, col, list) {
    var activeFile, activeEditor = atom.workspace.getActiveTextEditor();
    if (activeEditor !== undefined && activeEditor !== null) {
        activeFile = activeEditor.getPath();
    }
    if (filePath !== activeFile) {
        atom.workspace.open(filePath, {
            initialLine: line - 1,
            initialColumn: col
        });
    }
    else {
        atom.workspace.getActiveTextEditor().cursors[0].setBufferPosition([line - 1, col]);
    }
    list.lastPosition = { filePath: filePath, line: line, col: col };
}
exports.gotoLine = gotoLine;
/**
 * Uses `activeList` to go to the next error or loop back
 * Storing `lastPosition` with the list allows us to be lazy elsewhere and actively find the element here
 */
function findCurrentIndexInList() {
    // Early exit if no members
    if (!exports.activeList.members.length) {
        atom.notifications.addInfo('AtomTS: no go-to members in active list');
        return -1;
    }
    // If we don't have a lastPosition then first is the last position
    if (!exports.activeList.lastPosition)
        return 0;
    var lastPosition = exports.activeList.lastPosition;
    var index = indexOf(exports.activeList.members, function (item) { return item.filePath == lastPosition.filePath && item.line == lastPosition.line; });
    // if the item has since been removed go to 0
    if (index == -1) {
        return 0;
    }
    return index;
}
/** Uses `activeList` to go to the next position or loop back */
function gotoNext() {
    var currentIndex = findCurrentIndexInList();
    if (currentIndex == -1)
        return;
    var nextIndex = currentIndex + 1;
    // If next is == length then loop to zero
    if (nextIndex == exports.activeList.members.length) {
        nextIndex = 0;
    }
    var next = exports.activeList.members[nextIndex];
    gotoLine(next.filePath, next.line, next.col, exports.activeList);
}
exports.gotoNext = gotoNext;
function gotoPrevious() {
    var currentIndex = findCurrentIndexInList();
    if (currentIndex == -1)
        return;
    var previousIndex = currentIndex - 1;
    // If next is == -1 then loop to length
    if (previousIndex == -1) {
        previousIndex = exports.activeList.members.length - 1;
    }
    var previous = exports.activeList.members[previousIndex];
    gotoLine(previous.filePath, previous.line, previous.col, exports.activeList);
}
exports.gotoPrevious = gotoPrevious;
/**
 * Utility Return index of element in an array
 */
function indexOf(items, filter) {
    for (var i = 0; i < items.length; i++) {
        if (filter(items[i])) {
            return i;
        }
    }
    return -1;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3NoYW5ub25iZXJ0dWNjaS8uZG90ZmlsZXMvYXRvbS5zeW1saW5rL3BhY2thZ2VzL2F0b20tdHlwZXNjcmlwdC9saWIvbWFpbi9hdG9tL2dvdG9IaXN0b3J5LnRzIiwic291cmNlcyI6WyIvVXNlcnMvc2hhbm5vbmJlcnR1Y2NpLy5kb3RmaWxlcy9hdG9tLnN5bWxpbmsvcGFja2FnZXMvYXRvbS10eXBlc2NyaXB0L2xpYi9tYWluL2F0b20vZ290b0hpc3RvcnkudHMiXSwibmFtZXMiOlsiZ290b0xpbmUiLCJmaW5kQ3VycmVudEluZGV4SW5MaXN0IiwiZ290b05leHQiLCJnb3RvUHJldmlvdXMiLCJpbmRleE9mIl0sIm1hcHBpbmdzIjoiQUFDVyx5QkFBaUIsR0FBeUIsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUM7QUFDMUQsbUJBQVcsR0FBeUIsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUM7QUFDcEQsd0JBQWdCLEdBQXlCLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBR3BFLEFBREEsZ0NBQWdDO0FBQ3JCLGtCQUFVLEdBQXlCLHlCQUFpQixDQUFDO0FBRWhFLFNBQWdCLFFBQVEsQ0FBQyxRQUFnQixFQUFFLElBQVksRUFBRSxHQUFXLEVBQUUsSUFBMEI7SUFDNUZBLElBQUlBLFVBQVVBLEVBQ1ZBLFlBQVlBLEdBQUdBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLG1CQUFtQkEsRUFBRUEsQ0FBQ0E7SUFDeERBLEVBQUVBLENBQUNBLENBQUNBLFlBQVlBLEtBQUtBLFNBQVNBLElBQUlBLFlBQVlBLEtBQUtBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO1FBQ3REQSxVQUFVQSxHQUFHQSxZQUFZQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtJQUN4Q0EsQ0FBQ0E7SUFFREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsUUFBUUEsS0FBS0EsVUFBVUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDMUJBLElBQUlBLENBQUNBLFNBQVNBLENBQUNB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InNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IHZhciBlcnJvcnNJbk9wZW5GaWxlczogVGFiV2l0aEdvdG9Qb3NpdGlvbnMgPSB7IG1lbWJlcnM6IFtdIH07XG5leHBvcnQgdmFyIGJ1aWxkT3V0cHV0OiBUYWJXaXRoR290b1Bvc2l0aW9ucyA9IHsgbWVtYmVyczogW10gfTtcbmV4cG9ydCB2YXIgcmVmZXJlbmNlc091dHB1dDogVGFiV2l0aEdvdG9Qb3NpdGlvbnMgPSB7IG1lbWJlcnM6IFtdIH07XG5cbi8qKiBUaGlzICptdXN0KiBhbHdheXMgYmUgc2V0ICovXG5leHBvcnQgdmFyIGFjdGl2ZUxpc3Q6IFRhYldpdGhHb3RvUG9zaXRpb25zID0gZXJyb3JzSW5PcGVuRmlsZXM7XG5cbmV4cG9ydCBmdW5jdGlvbiBnb3RvTGluZShmaWxlUGF0aDogc3RyaW5nLCBsaW5lOiBudW1iZXIsIGNvbDogbnVtYmVyLCBsaXN0OiBUYWJXaXRoR290b1Bvc2l0aW9ucykge1xuICAgIHZhciBhY3RpdmVGaWxlLFxuICAgICAgICBhY3RpdmVFZGl0b3IgPSBhdG9tLndvcmtzcGFjZS5nZXRBY3RpdmVUZXh0RWRpdG9yKCk7XG4gICAgaWYgKGFjdGl2ZUVkaXRvciAhPT0gdW5kZWZpbmVkICYmIGFjdGl2ZUVkaXRvciAhPT0gbnVsbCkge1xuICAgICAgICBhY3RpdmVGaWxlID0gYWN0aXZlRWRpdG9yLmdldFBhdGgoKTtcbiAgICB9XG5cbiAgICBpZiAoZmlsZVBhdGggIT09IGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub3BlbihmaWxlUGF0aCwge1xuICAgICAgICAgICAgaW5pdGlhbExpbmU6IGxpbmUgLSAxLFxuICAgICAgICAgICAgaW5pdGlhbENvbHVtbjogY29sXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVRleHRFZGl0b3IoKS5jdXJzb3JzWzBdLnNldEJ1ZmZlclBvc2l0aW9uKFtsaW5lIC0gMSwgY29sXSk7XG4gICAgfVxuXG4gICAgbGlzdC5sYXN0UG9zaXRpb24gPSB7IGZpbGVQYXRoLCBsaW5lLCBjb2wgfTtcbn1cblxuLyoqXG4gKiBVc2VzIGBhY3RpdmVMaXN0YCB0byBnbyB0byB0aGUgbmV4dCBlcnJvciBvciBsb29wIGJhY2tcbiAqIFN0b3JpbmcgYGxhc3RQb3NpdGlvbmAgd2l0aCB0aGUgbGlzdCBhbGxvd3MgdXMgdG8gYmUgbGF6eSBlbHNld2hlcmUgYW5kIGFjdGl2ZWx5IGZpbmQgdGhlIGVsZW1lbnQgaGVyZVxuICovXG5mdW5jdGlvbiBmaW5kQ3VycmVudEluZGV4SW5MaXN0KCk6IG51bWJlciB7XG4gICAgLy8gRWFybHkgZXhpdCBpZiBubyBtZW1iZXJzXG4gICAgaWYgKCFhY3RpdmVMaXN0Lm1lbWJlcnMubGVuZ3RoKSB7XG4gICAgICAgIGF0b20ubm90aWZpY2F0aW9ucy5hZGRJbmZvKCdBdG9tVFM6IG5vIGdvLXRvIG1lbWJlcnMgaW4gYWN0aXZlIGxpc3QnKTtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgbGFzdFBvc2l0aW9uIHRoZW4gZmlyc3QgaXMgdGhlIGxhc3QgcG9zaXRpb25cbiAgICBpZiAoIWFjdGl2ZUxpc3QubGFzdFBvc2l0aW9uKVxuICAgICAgICByZXR1cm4gMDtcblxuICAgIHZhciBsYXN0UG9zaXRpb24gPSBhY3RpdmVMaXN0Lmxhc3RQb3NpdGlvbjtcbiAgICB2YXIgaW5kZXggPSBpbmRleE9mKGFjdGl2ZUxpc3QubWVtYmVycywgKGl0ZW0pID0+IGl0ZW0uZmlsZVBhdGggPT0gbGFzdFBvc2l0aW9uLmZpbGVQYXRoICYmIGl0ZW0ubGluZSA9PSBsYXN0UG9zaXRpb24ubGluZSk7XG5cbiAgICAvLyBpZiB0aGUgaXRlbSBoYXMgc2luY2UgYmVlbiByZW1vdmVkIGdvIHRvIDBcbiAgICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiBpbmRleDtcbn1cblxuLyoqIFVzZXMgYGFjdGl2ZUxpc3RgIHRvIGdvIHRvIHRoZSBuZXh0IHBvc2l0aW9uIG9yIGxvb3AgYmFjayAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdvdG9OZXh0KCkge1xuICAgIHZhciBjdXJyZW50SW5kZXggPSBmaW5kQ3VycmVudEluZGV4SW5MaXN0KCk7XG4gICAgaWYgKGN1cnJlbnRJbmRleCA9PSAtMSkgcmV0dXJuO1xuXG4gICAgdmFyIG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCArIDE7XG4gICAgLy8gSWYgbmV4dCBpcyA9PSBsZW5ndGggdGhlbiBsb29wIHRvIHplcm9cbiAgICBpZiAobmV4dEluZGV4ID09IGFjdGl2ZUxpc3QubWVtYmVycy5sZW5ndGgpIHtcbiAgICAgICAgbmV4dEluZGV4ID0gMDtcbiAgICB9XG5cbiAgICB2YXIgbmV4dCA9IGFjdGl2ZUxpc3QubWVtYmVyc1tuZXh0SW5kZXhdO1xuICAgIGdvdG9MaW5lKG5leHQuZmlsZVBhdGgsIG5leHQubGluZSwgbmV4dC5jb2wsIGFjdGl2ZUxpc3QpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ290b1ByZXZpb3VzKCkge1xuICAgIHZhciBjdXJyZW50SW5kZXggPSBmaW5kQ3VycmVudEluZGV4SW5MaXN0KCk7XG4gICAgaWYgKGN1cnJlbnRJbmRleCA9PSAtMSkgcmV0dXJuO1xuXG4gICAgdmFyIHByZXZpb3VzSW5kZXggPSBjdXJyZW50SW5kZXggLSAxO1xuICAgIC8vIElmIG5leHQgaXMgPT0gLTEgdGhlbiBsb29wIHRvIGxlbmd0aFxuICAgIGlmIChwcmV2aW91c0luZGV4ID09IC0xKSB7XG4gICAgICAgIHByZXZpb3VzSW5kZXggPSBhY3RpdmVMaXN0Lm1lbWJlcnMubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXMgPSBhY3RpdmVMaXN0Lm1lbWJlcnNbcHJldmlvdXNJbmRleF07XG4gICAgZ290b0xpbmUocHJldmlvdXMuZmlsZVBhdGgsIHByZXZpb3VzLmxpbmUsIHByZXZpb3VzLmNvbCwgYWN0aXZlTGlzdCk7XG59XG5cblxuLyoqXG4gKiBVdGlsaXR5IFJldHVybiBpbmRleCBvZiBlbGVtZW50IGluIGFuIGFycmF5XG4gKi9cbmZ1bmN0aW9uIGluZGV4T2Y8VD4oaXRlbXM6IFRbXSwgZmlsdGVyOiAoaXRlbTogVCkgPT4gYm9vbGVhbik6IG51bWJlciB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZmlsdGVyKGl0ZW1zW2ldKSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuIl19
//# sourceURL=/Users/shannonbertucci/.dotfiles/atom.symlink/packages/atom-typescript/lib/main/atom/gotoHistory.ts
